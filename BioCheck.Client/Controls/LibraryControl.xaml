<UserControl x:Class="BioCheck.Controls.LibraryControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <UserControl.Resources>

        <DataTemplate x:Key="SelectedRowTemplate">
            <StackPanel Orientation="Horizontal" Background="White">

                <!--<Image Source="logo.png" Margin="5,5,5,5"></Image>-->

                <TextBlock Margin="5,5,5,5" 
                           Width="Auto" 
                           Text="{Binding Description}"
                           TextWrapping="Wrap" Style="{StaticResource SubLabelTextStyle}"/>

            </StackPanel>
        </DataTemplate>

    </UserControl.Resources>

    <Grid Width="410" 
                         Height="362"
                          >
        <Border BorderBrush="#FFBABCBE" BorderThickness="2" CornerRadius="8" d:LayoutOverrides="HorizontalMargin">
            <Border.Effect>
                <DropShadowEffect Direction="331" BlurRadius="8" ShadowDepth="3"/>
            </Border.Effect>
        </Border>
        <Border BorderBrush="#FFBBBDBF" BorderThickness="2,5,2,2" CornerRadius="8" Background="White">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="28"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Rectangle Fill="#FFBBBDBF" Margin="0,-12,0,0" Cursor="Hand" Height="25" Grid.Row="1" VerticalAlignment="Top"/>
                <Button 
									TabIndex="3" 
									Command="{Binding CloseCommand}"
									Style="{StaticResource PathButtonStyle}" Margin="0,-2,-3,-8" HorizontalAlignment="Right" Width="38">
                    <Path Data="M4.6969919,3.9939952 L10.498491,9.7945509 L16.29999,3.9939954 L17.00699,4.7009959 L11.205549,10.501494 L17.00699,16.301996 L16.29999,17.008997 L10.498491,11.208438 L4.696991,17.008997 L3.9899905,16.301996 L9.7914324,10.501494 L3.9899912,4.7009959 z M0.99999994,1.0000002 L0.99999994,20.000008 L20,20.000008 L20,1.0000002 z M0,0 L21,0 L21,21 L0,21 z" Fill="White" Height="21" Stretch="Fill" Width="21" UseLayoutRounding="False"/>
                </Button>
                <Rectangle Fill="#FFBBBDBF" Cursor="Hand" Grid.Row="1" RadiusX="4" RadiusY="4" Margin="-2,-4,157,-2"/>
                <StackPanel Margin="5,0,0,4" Orientation="Horizontal" Grid.RowSpan="2" d:LayoutOverrides="Height" HorizontalAlignment="Left">
                    <Button x:Name="NewButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="New Model" Width="35" Height="35" 
									Command="{Binding NewCommand}">

                        <Path Data="M10.88996,0.65800411 L0.5,0.65800411 L0.5,26.338005 L18.563,26.338005 L18.563,8.329999 L10.88996,0.65800411 z M11.001987,0.5 L11.001987,8.1719999 L18.674988,8.1719999" Fill="White" Height="26.838" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FF808184" StrokeThickness="1" StrokeMiterLimit="4" StrokeLineJoin="Miter" Width="19.175" UseLayoutRounding="False"/>

                    </Button>
                    <Button x:Name="DuplicateButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="Duplicate" Width="35" Height="35" Margin="5,0,0,0"
									Command="{Binding DuplicateCommand}">

                    	<Path Data="F1M109.2988,553.8301L105.5238,553.8301L105.5238,543.5511L98.3128,536.3401L94.0098,536.3401L94.0098,531.6721L102.3808,531.6721L102.3808,538.5921L109.2988,538.5921z M98.6058,543.2581L98.6058,538.0471L103.8168,543.2581z M104.5238,559.4981L89.2348,559.4981L89.2348,537.3401L97.6058,537.3401L97.6058,544.2581L104.5238,544.2581z M103.3808,532.3791L108.5918,537.5921L103.3808,537.5921z M110.2988,537.8851L103.0878,530.6721L93.0098,530.6721L93.0098,536.3401L88.2348,536.3401L88.2348,560.4981L105.5238,560.4981L105.5238,554.8301L110.2988,554.8301z" Fill="#FF808184" Height="29.826" Stretch="Fill" Width="22.064" UseLayoutRounding="False"/>

                    </Button>
                    <Button x:Name="OpenButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="Open" Width="35" Height="35" 
										Command="{Binding OpenCommand}" Margin="5,0,0,0">

                        <Path Data="M9.5309887,11.162954 L5.5639915,15.129944 L7.9039888,15.129944 L7.9039888,23.127949 L11.159986,23.127949 L11.159986,15.129944 L13.497986,15.129944 z M9.5309887,9.74895 L15.911988,16.129946 L12.159987,16.129946 L12.159987,24.127949 L6.9039884,24.127949 L6.9039884,16.129946 L3.1499889,16.129946 z M11.501997,1.8190265 L11.501997,7.5140224 L17.197994,7.5140224 z M0.99999976,0.99999714 L0.99999976,25.68 L18.063,25.68 L18.063,8.51402 L10.501997,8.51402 L10.501997,0.99999714 z M0,0 L11.09799,0 L11.440001,0.34204006 L11.501997,0.34204006 L11.501997,0.40502834 L18.611996,7.5140224 L18.673992,7.5140224 L18.673992,7.5760336 L19.063,7.9650102 L19.063,26.68 L0,26.68 z" Fill="#FF808184" Height="26.68" Stretch="Fill" Width="19.063" UseLayoutRounding="False"/>

                    </Button>
                    <Button x:Name="DeleteButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="Delete" Width="35" Height="35" Margin="5,0,0,0"
									Command="{Binding DeleteCommand}">

                        <Path Data="M0.5,0.50099182 L21.889,21.889992 M0.5,21.889 L21.889,0.5" Height="22.39" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FF808184" StrokeThickness="1" StrokeMiterLimit="4" StrokeLineJoin="Miter" Width="22.389" UseLayoutRounding="False"/>

                    </Button>
                    <Button x:Name="ImportButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="Import from XML" Width="35" Height="35" 
										Command="{Binding ImportXmlCommand}" Margin="5,0.5,0,0.5">

                        <Path Data="M10.996996,13.072947 L10.996996,15.41297 L1.0000005,15.41297 L1.0000005,18.668945 L10.996996,18.668945 L10.996996,21.006954 L14.964998,17.039919 z M17.758026,1.8190269 L17.758026,7.5140224 L23.453022,7.5140224 z M7.256022,0.99999714 L7.256022,14.412971 L9.9969959,14.412971 L9.9969959,10.65895 L16.379,17.039919 L9.9969959,23.42095 L9.9969959,19.668941 L7.256022,19.668941 L7.256022,25.68 L24.319019,25.68 L24.319019,8.5140209 L16.758026,8.5140209 L16.758026,0.99999714 z M6.2560215,0 L17.354019,0 L17.695023,0.34204006 L17.758026,0.34204006 L17.758026,0.40502834 L24.867025,7.5140224 L24.930029,7.5140224 L24.930029,7.5770106 L25.319021,7.9650106 L25.319021,26.68 L6.2560215,26.68 L6.2560215,19.668941 L0,19.668941 L0,14.412971 L6.2560215,14.412971 z" Fill="#FF808184" Height="26.68" Stretch="Fill" Width="25.319" UseLayoutRounding="False"/>

                    </Button>
                    <Button x:Name="ExportButton" Style="{StaticResource PopupToolbarButtonStyle}" ToolTipService.ToolTip="Export to XML" Width="35" Height="35" 
										Command="{Binding ExportXmlCommand}" Margin="5,0.5,0,0.5">

                        <Path Data="M5.3809977,13.070933 L1.4140019,17.037907 L5.3809977,21.00494 L5.3809977,18.664919 L15.379,18.664919 L15.379,15.408942 L5.3809977,15.408942 z M20.685982,1.8190268 L20.685982,7.5140228 L26.380993,7.5140228 z M10.183992,0.99999791 L10.183992,14.408943 L16.379,14.408943 L16.379,19.664917 L10.183992,19.664917 L10.183992,25.680002 L27.24699,25.680002 L27.24699,8.51402 L19.685982,8.51402 L19.685982,0.99999791 z M9.1839914,0 L20.28199,0 L20.622993,0.34204021 L20.685982,0.34204021 L20.685982,0.40502813 L27.794994,7.5140228 L27.858013,7.5140228 L27.858013,7.5770111 L28.24699,7.9650106 L28.24699,26.68 L9.1839914,26.68 L9.1839914,19.664917 L6.3809981,19.664917 L6.3809981,23.418938 L0,17.037907 L6.3809981,10.656937 L6.3809981,14.408943 L9.1839914,14.408943 z" Fill="#FF808184" Height="26.68" Stretch="Fill" Width="28.247" UseLayoutRounding="False"/>

                    </Button>

                </StackPanel>

                <sdk:DataGrid 
                    x:Name="ModelsGrid"
                    LoadingRow="ModelsGrid_LoadingRow"
                    UnloadingRow="ModelsGrid_UnloadingRow"
                    Grid.Row="2" 
                    Margin="0,5" 
                    AutoGenerateColumns="False" 
                    ItemsSource="{Binding Models}" 
                    BorderBrush="{x:Null}" 
                    BorderThickness="0" 
                    SelectedItem="{Binding Path=SelectedModel, Mode=TwoWay}"
                    SelectionMode="Single" 
                    HorizontalScrollBarVisibility="Disabled" 
                    ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}" 
                    FontFamily="Verdana" 
                    Foreground="#FF58595B" 
                    FontSize="13.333"
                    RowStyle="{StaticResource DataGridRowStyle}" 
					Style="{StaticResource DataGridStyle}" 
					AreRowDetailsFrozen="True" 
                    MouseLeftButtonDown="DataGrid_MouseLeftButtonDown">

                    <!--RowDetailsTemplate="{StaticResource SelectedRowTemplate}" -->

                    <sdk:DataGrid.Columns>
                        
                        <sdk:DataGridTemplateColumn  
                                        Header="Name"							  
										Width="*">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DisplayName}" />
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>

                            <sdk:DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox  Text="{Binding DisplayName, Mode=TwoWay}" MouseLeftButtonDown="TextBox_MouseLeftButtonDown"/>
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellEditingTemplate>
                        </sdk:DataGridTemplateColumn>
                        
                        <sdk:DataGridTextColumn Binding="{Binding CreatedDateString}" IsReadOnly="True" Header="Created"/>
                        <sdk:DataGridTextColumn Binding="{Binding ModifiedDateString}" IsReadOnly="True" Header="Modified"/>
                    </sdk:DataGrid.Columns>
                </sdk:DataGrid>

            </Grid>
        </Border>
    </Grid>
</UserControl>
